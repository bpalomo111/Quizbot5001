const CACHE='csv-quiz-pwa-v1';const CORE=['./','./index.html','./manifest.json','./icon-192.png','./icon-512.png'];self.addEventListener('install',e=>{e.waitUntil(caches.open(CACHE).then(c=>c.addAll(CORE)));self.skipWaiting()});self.addEventListener('activate',e=>{e.waitUntil(caches.keys().then(keys=>Promise.all(keys.map(k=>k!==CACHE?caches.delete(k):Promise.resolve()))));self.clients.claim()});self.addEventListener('fetch',e=>{const r=e.request;if(r.method==='GET'&&new URL(r.url).origin===location.origin){e.respondWith(caches.match(r).then(c=>{return c||fetch(r).then(resp=>{if(resp.ok){const copy=resp.clone();caches.open(CACHE).then(cc=>cc.put(r,copy))}return resp}).catch(()=>caches.match('./index.html'))}))}});